import e from"next/script";import t,{useContext as n,useState as r,useCallback as o,useEffect as a,memo as s,createContext as i}from"react";const m=["light","dark"],c="(prefers-color-scheme: dark)",l="undefined"==typeof window,d=i({setTheme:e=>{},themes:[]}),h=()=>n(d),u=({forcedTheme:e,disableTransitionOnChange:n=!1,enableSystem:s=!0,enableColorScheme:i=!0,storageKey:l="theme",themes:h=["light","dark"],defaultTheme:u=(s?"system":"light"),attribute:g="data-theme",value:b,children:p,nonce:S})=>{const[w,T]=r(()=>f(l,u)),[k,x]=r(()=>f(l)),C=b?Object.values(b):h,E=o(e=>{let t=e;"system"===e&&s&&(t=$());const r=b?b[t]:t,o=n?v():null,a=document.documentElement;if("class"===g?(a.classList.remove(...C),r&&a.classList.add(r)):r?a.setAttribute(g,r):a.removeAttribute(g),i){const e=m.includes(u)?u:null,n=m.includes(t)?t:e;a.style.colorScheme=n}null==o||o()},[]),L=o(e=>{T(e);try{localStorage.setItem(l,e)}catch(e){}},[e]),I=o(t=>{const n=$(t);x(n),"system"===w&&s&&!e&&E("system")},[w,e]);return a(()=>{const e=window.matchMedia(c);return e.addListener(I),I(e),()=>e.removeListener(I)},[I]),a(()=>{const e=e=>{e.key===l&&L(e.newValue||u)};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[L]),a(()=>{E(null!=e?e:w)},[e,w]),t.createElement(d.Provider,{value:{theme:w,setTheme:L,forcedTheme:e,resolvedTheme:"system"===w?k:w,themes:s?[...h,"system"]:h,systemTheme:s?k:void 0}},t.createElement(y,{forcedTheme:e,disableTransitionOnChange:n,enableSystem:s,enableColorScheme:i,storageKey:l,themes:h,defaultTheme:u,attribute:g,value:b,children:p,attrs:C,nonce:S}),p)},y=s(({forcedTheme:n,storageKey:r,attribute:o,enableSystem:a,enableColorScheme:s,defaultTheme:i,value:l,attrs:d,nonce:h})=>{const u="system"===i,y="class"===o?`var d=document.documentElement.classList;d.remove(${d.map(e=>`'${e}'`).join(",")});`:`var d=document.documentElement;var n='${o}';var s = 'setAttribute';`,f=s?m.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",v=(e,t=!1,n=!0)=>{const r=l?l[e]:e,a=t?e+"|| ''":`'${r}'`;let i="";return s&&n&&!t&&m.includes(e)&&(i+=`d.style.colorScheme = '${e}';`),"class"===o?i+=t||r?`d.add(${a})`:"null":r&&(i+=`d[s](n, ${a})`),i},$=n?`!function(){${y}${v(n)}}()`:a?`!function(){try {${y}var e=localStorage.getItem('${r}');if("system"===e||(!e&&${u})){var t="${c}",m=window.matchMedia(t);if(m.media!==t||m.matches){${v("dark")}}else{${v("light")}}}else if(e){${l?`var x=${JSON.stringify(l)};`:""}${v(l?"x[e]":"e",!0)}}${u?"":"else{"+v(i,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${y}var e=localStorage.getItem("${r}");if(e){${l?`var x=${JSON.stringify(l)};`:""}${v(l?"x[e]":"e",!0)}}else{${v(i,!1,!1)};}${f}}catch(t){}}();`,b="data:text/javascript;base64,"+g($);return t.createElement(e,{id:"next-themes-script",strategy:"beforeInteractive",src:b,nonce:h})},()=>!0),f=(e,t)=>{if(l)return;let n;try{n=localStorage.getItem(e)||void 0}catch(e){}return n||t},v=()=>{const e=document.createElement("style");return e.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e)},1)}},$=e=>(e||(e=window.matchMedia(c)),e.matches?"dark":"light"),g=e=>l?Buffer.from(e).toString("base64"):btoa(e);export{u as ThemeProvider,h as useTheme};
